<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Week 8: Tidy Data</title>
    <meta charset="utf-8" />
    <meta name="author" content="Joe Nese University of Oregon Fall 2021" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/freezeframe/freezeframe.min.js"></script>
    <script src="libs/xaringanExtra-freezeframe/freezeframe-init.js"></script>
    <script id="xaringanExtra-freezeframe-options" type="application/json">{"selector":"img[src$=\"gif\"]","trigger":"click","overlay":false,"responsive":true,"warnings":true}</script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Week 8: Tidy Data
## <code>{tidyr}</code>
### Joe Nese<br><span style="font-size: 50%;">University of Oregon<br>Fall 2021</span>

---








---
class: inverse, left, middle

# Tidy Data 
## Week 8

---

# Agenda

*

**Overall Purpose**

* 

---

background-size: contain

background-image: url("https://www.tidyverse.org/images/tidyverse-default.png")

---

# Providing grammar for:

* Graphics 
  + `{ggplot2}`
* Data manipulations 
  + `{dplyr}`
  + `{tidyr}`
* Expanding area of specialized topics
  + `{lubridate}`
  + `{glue}`
  + `{tidymodels}`
* Many more...

---

# Providing grammar for:

* Graphics 
  + `{ggplot2}`
* Data manipulations
  + `{dplyr}`
  + .bg-yellow[`{tidyr}`]
* Expanding area of specialized topics
  + `{lubridate}`
  + `{glue}`
  + `{tidymodels}`
* Many more...


---
class: inverse, left, middle

# `{tidyr}`

---
# `{dplyr}` vs `{tidyr}`

.pull-left[
**`{dplyr} `**
Helps you manipulate your data
* `select()`
* `filter()`
* `mutate()`
* `summarize()`
...
]

.pull-right[
**`{tidyr}`**
Helps you get your data into a tidy format
* `pivot_longer()`
* `pivot_wider()`
* `separate()` and `extract()`
* `unite()`
* `nest()`
]

--

Talk with a neighbor about what you think `pivot_longer()` and `pivot_wider()` do

<div class="countdown" id="timer_614e050f" style="right:0;bottom:0;" data-warnwhen="30">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# Data cleaning

&gt; “It is often said that 80% of data analysis is spent on the process of cleaning and preparing the data (Dasu and Johnson 2003).”
&gt; - Hadley Wickham (Tidy Data)

&lt;br&gt;
&lt;br&gt;
* Persistent and varied challenge

* Little research on how to do it well

---
# Tidy Data

* Each variable is a column
* Each observation is a row
* Each type of observational unit forms a table
  + We won’t talk much about this point
  
&lt;img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" width="60%" style="display: block; margin: auto;" /&gt;

.footnote[
[R4DS](https://r4ds.had.co.nz/tidy-data.html)
]

---
background-image: url(https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/tidydata_1.jpg)
background-size: contain

.footnote[
[Allison Horst](https://github.com/allisonhorst/stats-illustrations)
]

---
# Common ways data are "messy"

* Column headers are values, not variable names

* Multiple variables stored in one column

* Variables are stored in both rows and columns
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
* See the pivoting [vignette](https://tidyr.tidyverse.org/articles/pivot.html) for examples and solutions

---
background-image: url(https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/tidydata_2.jpg)
background-size: contain

.footnote[
[Allison Horst](https://github.com/allisonhorst/stats-illustrations)
]

---
# Defining tidy data

**Essentially, two rules define tidy data**&lt;sup&gt;1&lt;/sup&gt; 

1. Each row is a case representing the same underlying attribute
2. Each column is a variable containing the same type of value for each case

The combination of rows and columns make each observational unit (row) unique, even though cells may be repeated many times (e.g., student identifier)

.footnote[
&lt;sup&gt;1&lt;/sup&gt; [Modern Data Science with R](https://mdsr-book.github.io/)
]

---
# Why tidy?

* There are many reasons why you might want to have "messy" data
  + e.g., for other software or specific modeling purposes

--

* However, tidy data is an extremely useful format generally, and particularly useful when applying tools within the `{tidyverse}`

--

* All packages within the `{tidyverse}` are designed to either help you get your data in a tidy format, or assume your data are already in a tidy format

--

* Assuming a common data format leads to large jumps in efficiency, as the output from certain functions can be directly input into others

---
background-image: url(https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/tidydata_3.jpg)
background-size: contain

.footnote[
[Allison Horst](https://github.com/allisonhorst/stats-illustrations)
]

---
background-image: url(https://d33wubrfki0l68.cloudfront.net/795c039ba2520455d833b4034befc8cf360a70ba/558a5/diagrams/data-science-explore.png)
background-size: contain

.footnote[
[R4DS](https://r4ds.had.co.nz/tidy-data.html)
]

---
# `{tidyr}` verbs

--

`pivot_longer()`
--
: "lengthens" data, increasing the number of rows and decreasing the number of columns

--

`pivot_wider()`
--
: "widens" data, increasing the number of columns and decreasing the number of rows

--

`separate()`
--
: turns a single character column into multiple columns

--

`extract()`
--
: given a [regular expression](https://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions) with capturing groups, turns each group into a new column

--

`unite()`
--
: paste together multiple columns into one

--

`nest()`
--
: creates a list-column of data frames; you get one row for each group defined by the non-nested columns. This is useful in conjunction with other summaries that work with whole datasets, like models
  + **so** powerful

---
class: inverse, left, middle

# `pivot_longer()`

---
# `pivot_longer()`

There are different ways to `pivot_longer()` that will depend on what your data look like 

.pull-left[

```r
pivot_longer(
  data,
  cols,
  names_to = "name",
  names_prefix = NULL,
  names_sep = NULL,
  names_pattern = NULL,
  names_ptypes = list(),
  names_transform = list(),
  names_repair = "check_unique",
  values_to = "value",
  values_drop_na = FALSE,
  values_ptypes = list(),
  values_transform = list(),
  ...
)
```
]

---
# `pivot_longer()`

There are different ways to `pivot_longer()` that will depend on what your data look like 

.pull-left[

```r
pivot_longer(
* data,
* cols,
* names_to = "name",
  names_prefix = NULL,
  names_sep = NULL,
  names_pattern = NULL,
  names_ptypes = list(),
  names_transform = list(),
  names_repair = "check_unique",
* values_to = "value",
  values_drop_na = FALSE,
  values_ptypes = list(),
  values_transform = list(),
  ...
)
```
]

---
# `pivot_longer()`

.pull-left[

```r
pivot_longer(
* data,
* cols,
* names_to = "name",
* values_to = "value",
)
```
]

---
# `pivot_longer()`

.pull-left[

```r
pivot_longer(
* data,
  cols, 
  names_to = "name", 
  values_to = "value", 
)
```
]

.pull-right[
a data frame to pivot

```r
df %&gt;% 
  pivot_wider()
```
*or*

```r
pivot_wider(df)
```
]

---
# `pivot_longer()`

.pull-left[

```r
pivot_longer(
  data, 
* cols,
  names_to = "name", 
  values_to = "value", 
)
```
]

.pull-right[
The names of the `col`umns you want to pivot into longer format
]

---
# `pivot_longer()`

.pull-left[

```r
pivot_longer(
  data, 
  cols, 
* names_to = "name",
  values_to = "value", 
)
```
]

.pull-right[
A string specifying the name of the **new** column to create from the data stored in the `col`umn names of data

Can be a character vector, creating multiple columns, if `names_sep` or `names_pattern` is provided
]

---
# `pivot_longer()`

.pull-left[

```r
pivot_longer(
  data, 
  cols, 
  names_to = "name", 
* values_to = "value",
)
```
]

.pull-right[
A string specifying the name of the **new** column to create from the data stored in cell values of the `col`umns
]

---
# Messy data

What makes this data messy?

Or, why is this data not tidy?


```r
tidyr::relig_income
```

```
## # A tibble: 18 x 11
##    religion     `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k` `$100-150k` `&gt;150k` `Don't know/ref~
##    &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;
##  1 Agnostic          27        34        60        81        76       137        122         109      84               96
##  2 Atheist           12        27        37        52        35        70         73          59      74               76
##  3 Buddhist          27        21        30        34        33        58         62          39      53               54
##  4 Catholic         418       617       732       670       638      1116        949         792     633             1489
##  5 Don’t know/~      15        14        15        11        10        35         21          17      18              116
##  6 Evangelical~     575       869      1064       982       881      1486        949         723     414             1529
##  7 Hindu              1         9         7         9        11        34         47          48      54               37
##  8 Historicall~     228       244       236       238       197       223        131          81      78              339
##  9 Jehovah's W~      20        27        24        24        21        30         15          11       6               37
## 10 Jewish            19        19        25        25        30        95         69          87     151              162
## 11 Mainline Pr~     289       495       619       655       651      1107        939         753     634             1328
## 12 Mormon            29        40        48        51        56       112         85          49      42               69
## 13 Muslim             6         7         9        10         9        23         16           8       6               22
## 14 Orthodox          13        17        23        32        32        47         38          42      46               73
## 15 Other Chris~       9         7        11        13        13        14         18          14      12               18
## 16 Other Faiths      20        33        40        46        49        63         46          40      41               71
## 17 Other World~       5         2         3         4         2         7          3           4       4                8
## 18 Unaffiliated     217       299       374       365       341       528        407         321     258              597
```

---
# Messy data

Column headers are values (data!), not variable names


```r
tidyr::relig_income
```

```
## # A tibble: 18 x 11
*##    religion     `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k` `$100-150k` `&gt;150k` `Don't know/ref~
##    &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;
##  1 Agnostic          27        34        60        81        76       137        122         109      84               96
##  2 Atheist           12        27        37        52        35        70         73          59      74               76
##  3 Buddhist          27        21        30        34        33        58         62          39      53               54
##  4 Catholic         418       617       732       670       638      1116        949         792     633             1489
##  5 Don’t know/~      15        14        15        11        10        35         21          17      18              116
##  6 Evangelical~     575       869      1064       982       881      1486        949         723     414             1529
##  7 Hindu              1         9         7         9        11        34         47          48      54               37
##  8 Historicall~     228       244       236       238       197       223        131          81      78              339
##  9 Jehovah's W~      20        27        24        24        21        30         15          11       6               37
## 10 Jewish            19        19        25        25        30        95         69          87     151              162
## 11 Mainline Pr~     289       495       619       655       651      1107        939         753     634             1328
## 12 Mormon            29        40        48        51        56       112         85          49      42               69
## 13 Muslim             6         7         9        10         9        23         16           8       6               22
## 14 Orthodox          13        17        23        32        32        47         38          42      46               73
## 15 Other Chris~       9         7        11        13        13        14         18          14      12               18
## 16 Other Faiths      20        33        40        46        49        63         46          40      41               71
## 17 Other World~       5         2         3         4         2         7          3           4       4                8
## 18 Unaffiliated     217       299       374       365       341       528        407         321     258              597
```

---
# Let's `pivot_longer()`

Necessary arguments
* `data` - of course
* `cols` – which columns you will pivot longer
* `names_to` – new variable name (in quotes) for those `cols`
* `values_to` – new variable name (in quotes) for the cell values

---
# Let's `pivot_longer()`

.left-column[

```r
relig_income %&gt;% 
 pivot_longer(
  cols = _____,
  names_to = "_____",
  values_to = "_____"
 )
```
]
.right-column[

```
## # A tibble: 18 x 11
##    religion     `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k` `$100-150k` `&gt;150k` `Don't know/ref~
##    &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;
##  1 Agnostic          27        34        60        81        76       137        122         109      84               96
##  2 Atheist           12        27        37        52        35        70         73          59      74               76
##  3 Buddhist          27        21        30        34        33        58         62          39      53               54
##  4 Catholic         418       617       732       670       638      1116        949         792     633             1489
##  5 Don’t know/~      15        14        15        11        10        35         21          17      18              116
##  6 Evangelical~     575       869      1064       982       881      1486        949         723     414             1529
##  7 Hindu              1         9         7         9        11        34         47          48      54               37
##  8 Historicall~     228       244       236       238       197       223        131          81      78              339
##  9 Jehovah's W~      20        27        24        24        21        30         15          11       6               37
## 10 Jewish            19        19        25        25        30        95         69          87     151              162
## 11 Mainline Pr~     289       495       619       655       651      1107        939         753     634             1328
## 12 Mormon            29        40        48        51        56       112         85          49      42               69
## 13 Muslim             6         7         9        10         9        23         16           8       6               22
## 14 Orthodox          13        17        23        32        32        47         38          42      46               73
## 15 Other Chris~       9         7        11        13        13        14         18          14      12               18
## 16 Other Faiths      20        33        40        46        49        63         46          40      41               71
## 17 Other World~       5         2         3         4         2         7          3           4       4                8
## 18 Unaffiliated     217       299       374       365       341       528        407         321     258              597
```
]

---
# Let's `pivot_longer()`

.pull-left[

```r
relig_income %&gt;% 
  pivot_longer(
    cols = -religion,
    names_to = "income",
    values_to = "frequency"
  )
```
]
.pull-right[

```
## # A tibble: 180 x 3
##    religion income             frequency
##    &lt;chr&gt;    &lt;chr&gt;                  &lt;dbl&gt;
##  1 Agnostic &lt;$10k                     27
##  2 Agnostic $10-20k                   34
##  3 Agnostic $20-30k                   60
##  4 Agnostic $30-40k                   81
##  5 Agnostic $40-50k                   76
##  6 Agnostic $50-75k                  137
##  7 Agnostic $75-100k                 122
##  8 Agnostic $100-150k                109
##  9 Agnostic &gt;150k                     84
## 10 Agnostic Don't know/refused        96
## # ... with 170 more rows
```
]

---
# Messy data

Many variables in column names

`tidyr::who` (modified slightly)


---
# Messy data

Many variables in column names

.pull-left[
* Example column names

`new_sp_m014`

`new_rel_f65`
]

---
# Messy data

Many variables in column names

.pull-left[
* Example column names

.darkorange[`new`]`_`.green[`sp`]`_`.darkblue[`m`].pink[`014`]

.darkorange[`new`]`_`.green[`rel`]`_`.darkblue[`f`].pink[`65`]
]

--

.pull-right[
.darkorange[all col names start with .darkorange[`"new_"`], which we don't need]

.green[diagnosis category (.green[`sp`, `sn`, `ep`, `rel`])]

.darkblue[sex, which in these data is limited to only `"m"` and `"f"`]

.pink[age range]
]

--

That's a lot of information in the column names!

---
# Messy data

Many variables in column names

Necessary arguments
* `data` - of course
* `cols` – which columns you will pivot longer
* `names_to` – new variable name**s** (in quotes) for those `cols`
* `values_to` – new variable name (in quotes) for the cell values
* .bg-yellow[`names_separate` – how to *separate* those `cols` names]

---
# Try it


```r
who_r %&gt;%
 pivot_longer(
  cols = new_sp_m014:new_rel_f65,
  names_to = c("diagnosis", "gender", "age"), 
  names_sep = "_",
  values_to = "count"
)
```

```
## # A tibble: 405,440 x 8
*##    country     iso2  iso3   year diagnosis gender age   count
##    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;
##  1 Afghanistan AF    AFG    1980 new       sp     m014     NA
##  2 Afghanistan AF    AFG    1980 new       sp     m1524    NA
##  3 Afghanistan AF    AFG    1980 new       sp     m2534    NA
##  4 Afghanistan AF    AFG    1980 new       sp     m3544    NA
##  5 Afghanistan AF    AFG    1980 new       sp     m4554    NA
##  6 Afghanistan AF    AFG    1980 new       sp     m5564    NA
##  7 Afghanistan AF    AFG    1980 new       sp     m65      NA
##  8 Afghanistan AF    AFG    1980 new       sp     f014     NA
##  9 Afghanistan AF    AFG    1980 new       sp     f1524    NA
## 10 Afghanistan AF    AFG    1980 new       sp     f2534    NA
## # ... with 405,430 more rows
```

---
# Don’t get discouraged

* This is tricky!
* Takes practice
* Takes trial and error
* Takes looking at the [help documentation](https://tidyr.tidyverse.org/reference/pivot_longer.html) and the [vignette](https://tidyr.tidyverse.org/articles/pivot.html) - a lot
* But you are rarely (never?) gifted with tidy data

---
# Declaring `cols` to `pivot_longer`

We can declare the columns to pivot other ways

The important part is just being clear which columns should be part of the gather

All of the below are equivalent


```r
relig_income %&gt;% 
  pivot_longer(
    cols = -religion,
    ...
```


```r
relig_income %&gt;% 
  pivot_longer(
    cols = -1,
    ...
```


```r
names(relig_income) %&gt;% 
  pivot_longer(
    cols = c(`&lt;$10k`:`Don't know/refused`),
    ...
```



```r
names(relig_income) %&gt;% 
  pivot_longer(
    cols = c(2:11),
    ...
```

---
## Let’s look at some education data

Load the *exam1.csv* data from Canvas or from your cloned course repo
  + You should start a new `R` script or Rmd


```r
library(tidyverse)
library(here)
exam &lt;- read_csv(here("data", "exam1.csv"))
```

---
# exam1 data


```
## # A tibble: 0 x 685
## # ... with 685 variables: stu_name &lt;chr&gt;, gender &lt;chr&gt;, item_1 &lt;chr&gt;, item_2 &lt;chr&gt;, item_3 &lt;chr&gt;, item_4 &lt;chr&gt;,
## #   item_5 &lt;chr&gt;, item_6 &lt;chr&gt;, item_7 &lt;chr&gt;, item_8 &lt;chr&gt;, item_9 &lt;chr&gt;, item_10 &lt;chr&gt;, item_11 &lt;chr&gt;, item_12 &lt;chr&gt;,
## #   item_13 &lt;chr&gt;, item_14 &lt;chr&gt;, item_15 &lt;chr&gt;, item_16 &lt;chr&gt;, item_17 &lt;chr&gt;, item_18
Adam &lt;chr&gt;, M...21 &lt;chr&gt;,
## #   1...22 &lt;chr&gt;, 1...23 &lt;chr&gt;, 1...24 &lt;chr&gt;, 1...25 &lt;chr&gt;, 1...26 &lt;chr&gt;, 1...27 &lt;chr&gt;, 1...28 &lt;chr&gt;, 0...29 &lt;chr&gt;,
## #   0...30 &lt;chr&gt;, 0...31 &lt;chr&gt;, 0...32 &lt;chr&gt;, 0...33 &lt;chr&gt;, 0...34 &lt;chr&gt;, 0...35 &lt;chr&gt;, 0...36 &lt;chr&gt;, 0...37 &lt;chr&gt;,
## #   0...38 &lt;chr&gt;, 0
Anne &lt;chr&gt;, F...40 &lt;chr&gt;, 1...41 &lt;chr&gt;, 1...42 &lt;chr&gt;, 1...43 &lt;chr&gt;, 1...44 &lt;chr&gt;, 1...45 &lt;chr&gt;,
## #   1...46 &lt;chr&gt;, 1...47 &lt;chr&gt;, 1...48 &lt;chr&gt;, 1...49 &lt;chr&gt;, 1...50 &lt;chr&gt;, 0...51 &lt;chr&gt;, 0...52 &lt;chr&gt;, 0...53 &lt;chr&gt;, ...
```

---
# Talk with a neighbor

* Are these data tidy?
* If not, what needs to happen to make them tidy?
* What are the variables? What are the values?

<div class="countdown" id="timer_614e02d0" style="right:0;bottom:0;" data-warnwhen="30">
<code class="countdown-time"><span class="countdown-digits minutes">04</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# exam1 data

What do we want?

--

Let’s change all *item* variables into two variables: *item* and *score*

--


```
## # A tibble: 0 x 669
## # ... with 669 variables: stu_name &lt;chr&gt;, gender &lt;chr&gt;, M...21 &lt;chr&gt;, 1...22 &lt;chr&gt;, 1...23 &lt;chr&gt;, 1...24 &lt;chr&gt;,
## #   1...25 &lt;chr&gt;, 1...26 &lt;chr&gt;, 1...27 &lt;chr&gt;, 1...28 &lt;chr&gt;, 0...29 &lt;chr&gt;, 0...30 &lt;chr&gt;, 0...31 &lt;chr&gt;, 0...32 &lt;chr&gt;,
## #   0...33 &lt;chr&gt;, 0...34 &lt;chr&gt;, 0...35 &lt;chr&gt;, 0...36 &lt;chr&gt;, 0...37 &lt;chr&gt;, 0...38 &lt;chr&gt;, 0
Anne &lt;chr&gt;, F...40 &lt;chr&gt;,
## #   1...41 &lt;chr&gt;, 1...42 &lt;chr&gt;, 1...43 &lt;chr&gt;, 1...44 &lt;chr&gt;, 1...45 &lt;chr&gt;, 1...46 &lt;chr&gt;, 1...47 &lt;chr&gt;, 1...48 &lt;chr&gt;,
## #   1...49 &lt;chr&gt;, 1...50 &lt;chr&gt;, 0...51 &lt;chr&gt;, 0...52 &lt;chr&gt;, 0...53 &lt;chr&gt;, 0...54 &lt;chr&gt;, 0...55 &lt;chr&gt;, 0...56 &lt;chr&gt;,
## #   0...57 &lt;chr&gt;, 0
Audrey &lt;chr&gt;, F...59 &lt;chr&gt;, 1...60 &lt;chr&gt;, 1...61 &lt;chr&gt;, 1...62 &lt;chr&gt;, 1...63 &lt;chr&gt;, 1...64 &lt;chr&gt;,
## #   1...65 &lt;chr&gt;, 1...66 &lt;chr&gt;, 1...67 &lt;chr&gt;, 1...68 &lt;chr&gt;, 1...69 &lt;chr&gt;, 0...70 &lt;chr&gt;, 0...71 &lt;chr&gt;, 1...72 &lt;chr&gt;, ...
```




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
