<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Joe Nese" />


<title>Week 3: Data Wrangling</title>

<script src="site_libs/header-attrs/header-attrs.js"></script>
<script src="site_libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation/tabsets.js"></script>
<link href="site_libs/highlightjs/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs/highlight.js"></script>
<link href="site_libs/font-awesome/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">EDLD 651</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="syllabus.html">Syllabus</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="schedule.html">Schedule</a>
</li>
<li>
  <a href="assignments.html">Assignments</a>
</li>
<li>
  <a href="https://github.com/uo-datasci-specialization/c1-intro-fall-2021">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Week 3: Data Wrangling</h1>
<h3 class="subtitle"><code>{dplyr}</code></h3>
<h4 class="author">Joe Nese</h4>
<h4 class="date">Fall 2021</h4>

</div>


<div id="agenda" class="section level1">
<h1>Agenda</h1>
<ul>
<li></li>
</ul>
<p><strong>Overall Purpose</strong></p>
<ul>
<li></li>
</ul>
<p>background-size: contain</p>
<p>background-image: url(“<a href="https://www.tidyverse.org/images/tidyverse-default.png" class="uri">https://www.tidyverse.org/images/tidyverse-default.png</a>”)</p>
<hr />
</div>
<div id="providing-grammar-for" class="section level1">
<h1>Providing grammar for:</h1>
<ul>
<li>Graphics
<ul>
<li><code>{ggplot2}</code></li>
</ul></li>
<li>Data manipulations
<ul>
<li><code>{dplyr}</code></li>
<li><code>{tidyr}</code></li>
</ul></li>
<li>Expanding area of specialized topics
<ul>
<li><code>{lubridate}</code></li>
<li><code>{glue}</code></li>
<li><code>{tidymodels}</code></li>
</ul></li>
<li>Many more…</li>
</ul>
<hr />
</div>
<div id="providing-grammar-for-1" class="section level1">
<h1>Providing grammar for:</h1>
<ul>
<li>Graphics
<ul>
<li><code>{ggplot2}</code></li>
</ul></li>
<li>Data manipulations
<ul>
<li>.lightblue.bg-yellow<a href="#dplyr-1"><code>{dplyr}</code></a></li>
<li><code>{tidyr}</code></li>
</ul></li>
<li>Expanding area of specialized topics
<ul>
<li><code>{lubridate}</code></li>
<li><code>{glue}</code></li>
<li><code>{tidymodels}</code></li>
</ul></li>
<li>Many more…</li>
</ul>
</div>
<div id="dplyr" class="section level1">
<h1><code>{dplyr}</code></h1>
<div>
<pre><code>&lt;p style=&quot;float: right;&quot;&gt;&lt;img src=&quot;https://d33wubrfki0l68.cloudfront.net/621a9c8c5d7b47c4b6d72e8f01f28d14310e8370/193fc/css/images/hex/dplyr.png&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;&lt;/p&gt;
&lt;p&gt;A grammar for data wrangling (verbs!)&lt;/p&gt;</code></pre>
</div>
<p>Take a minute with your neighbor to guess what the following functions do: * <code>select()</code> * <code>filter()</code> * <code>mutate()</code> * <code>arrange()</code> * <code>summarize()</code> * <code>group_by()</code></p>
<hr />
</div>
<div id="dplyr-1" class="section level1">
<h1><code>{dplyr}</code></h1>
<p>A grammar for data wrangling (verbs!)</p>
<ul>
<li><h2 id="select"><code>select()</code></h2>
<ul>
<li><h2 id="a-subset-of-columns">a subset of <strong>columns</strong></h2></li>
</ul></li>
<li><h2 id="filter"><code>filter()</code></h2>
<ul>
<li><h2 id="a-subset-of-rows">a subset of <strong>rows</strong></h2></li>
</ul></li>
<li><h2 id="mutate"><code>mutate()</code></h2>
<ul>
<li><h2 id="add-a-new-column-or-modify-an-existing-column"><strong>add</strong> a new column or <strong>modify</strong> an existing column</h2></li>
</ul></li>
<li><h2 id="arrange"><code>arrange()</code></h2>
<ul>
<li><h2 id="order-rows-in-ascendingdescending-order">order rows in ascending/descending order</h2></li>
</ul></li>
<li><h2 id="summarize"><code>summarize()</code></h2>
<ul>
<li>a column created according to other columns</li>
<li>for example: <code>mean()</code> or <code>sd()</code></li>
<li><h2 id="often-used-with">often used with…</h2></li>
</ul></li>
<li><code>group_by()</code></li>
</ul>
<hr />
</div>
<div id="arguments" class="section level1">
<h1>Arguments</h1>
<ul>
<li><strong><code>{dplyr}</code> always takes a data frame (tibble) as the first argument</strong>
<ul>
<li>just like <code>{ggplot}</code></li>
</ul></li>
<li>subsequent argument tell <code>{dplyr}</code> what to do with the data frame</li>
<li>returns the modified data frame</li>
</ul>
<hr />
</div>
<div id="select-1" class="section level1">
<h1><code>select()</code></h1>
<pre class="r"><code>select(df, a, c)</code></pre>
<p><img src="https://swcarpentry.github.io/r-novice-gapminder/fig/13-dplyr-fig1.png" /></p>
<p>.footnote[ Image from <a href="https://swcarpentry.github.io/r-novice-gapminder/fig/13-dplyr-fig1.png">Software Carpentry</a>]</p>
<hr />
</div>
<div id="filter-1" class="section level1">
<h1><code>filter()</code></h1>
<pre class="r"><code>filter(df,
       type == &quot;otter&quot;,
       site == &quot;bay&quot;)</code></pre>
<p><img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/dplyr_filter.jpg" /></p>
<p>.footnote[ Illustration by <a href="https://github.com/allisonhorst/stats-illustrations/">Allison Horst</a>]</p>
<hr />
</div>
<div id="examples" class="section level1">
<h1>Examples</h1>
<p>Let’s start with the presidential dataset from the {mdsr} package</p>
<pre class="r"><code>library(tidyverse)
#install.packages(&quot;mdsr&quot;)
library(mdsr)
presidential</code></pre>
<pre><code>## # A tibble: 11 x 4
##    name       start      end        party     
##    &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
##  1 Eisenhower 1953-01-20 1961-01-20 Republican
##  2 Kennedy    1961-01-20 1963-11-22 Democratic
##  3 Johnson    1963-11-22 1969-01-20 Democratic
##  4 Nixon      1969-01-20 1974-08-09 Republican
##  5 Ford       1974-08-09 1977-01-20 Republican
##  6 Carter     1977-01-20 1981-01-20 Democratic
##  7 Reagan     1981-01-20 1989-01-20 Republican
##  8 Bush       1989-01-20 1993-01-20 Republican
##  9 Clinton    1993-01-20 2001-01-20 Democratic
## 10 Bush       2001-01-20 2009-01-20 Republican
## 11 Obama      2009-01-20 2017-01-20 Democratic</code></pre>
<hr />
</div>
<div id="select-president-name-and-party" class="section level1">
<h1><code>select</code> president name and party</h1>
<pre class="r"><code>select(presidential, name, party)</code></pre>
<p><strong>OR</strong> more typically</p>
<pre class="r"><code>presidential %&gt;%
    select(name, party)</code></pre>
<pre><code>## # A tibble: 11 x 2
##    name       party     
##    &lt;chr&gt;      &lt;chr&gt;     
##  1 Eisenhower Republican
##  2 Kennedy    Democratic
##  3 Johnson    Democratic
##  4 Nixon      Republican
##  5 Ford       Republican
##  6 Carter     Democratic
##  7 Reagan     Republican
##  8 Bush       Republican
##  9 Clinton    Democratic
## 10 Bush       Republican
## 11 Obama      Democratic</code></pre>
<hr />
</div>
<div id="negation--" class="section level1">
<h1>Negation <code>-</code></h1>
<pre class="r"><code>select(presidential, -start)</code></pre>
<p><strong>OR</strong></p>
<pre class="r"><code>presidential %&gt;%
    select(-start)</code></pre>
<pre><code>## # A tibble: 11 x 3
##    name       end        party     
##    &lt;chr&gt;      &lt;date&gt;     &lt;chr&gt;     
##  1 Eisenhower 1961-01-20 Republican
##  2 Kennedy    1963-11-22 Democratic
##  3 Johnson    1969-01-20 Democratic
##  4 Nixon      1974-08-09 Republican
##  5 Ford       1977-01-20 Republican
##  6 Carter     1981-01-20 Democratic
##  7 Reagan     1989-01-20 Republican
##  8 Bush       1993-01-20 Republican
##  9 Clinton    2001-01-20 Democratic
## 10 Bush       2009-01-20 Republican
## 11 Obama      2017-01-20 Democratic</code></pre>
<hr />
</div>
<div id="indexing" class="section level1">
<h1>Indexing</h1>
<pre class="r"><code>select(presidential, 1:3)</code></pre>
<p><strong>OR</strong></p>
<pre class="r"><code>presidential %&gt;%
    select(1:3)</code></pre>
<pre><code>## # A tibble: 11 x 3
##    name       start      end       
##    &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;    
##  1 Eisenhower 1953-01-20 1961-01-20
##  2 Kennedy    1961-01-20 1963-11-22
##  3 Johnson    1963-11-22 1969-01-20
##  4 Nixon      1969-01-20 1974-08-09
##  5 Ford       1974-08-09 1977-01-20
##  6 Carter     1977-01-20 1981-01-20
##  7 Reagan     1981-01-20 1989-01-20
##  8 Bush       1989-01-20 1993-01-20
##  9 Clinton    1993-01-20 2001-01-20
## 10 Bush       2001-01-20 2009-01-20
## 11 Obama      2009-01-20 2017-01-20</code></pre>
<hr />
</div>
<div id="use-multiple-methods" class="section level1">
<h1>Use multiple methods</h1>
<pre class="r"><code>select(presidential, name, 2, 4)</code></pre>
<p><strong>OR</strong></p>
<pre class="r"><code>presidential %&gt;%
    select(name, 2, 4)</code></pre>
<pre><code>## # A tibble: 11 x 3
##    name       start      party     
##    &lt;chr&gt;      &lt;date&gt;     &lt;chr&gt;     
##  1 Eisenhower 1953-01-20 Republican
##  2 Kennedy    1961-01-20 Democratic
##  3 Johnson    1963-11-22 Democratic
##  4 Nixon      1969-01-20 Republican
##  5 Ford       1974-08-09 Republican
##  6 Carter     1977-01-20 Democratic
##  7 Reagan     1981-01-20 Republican
##  8 Bush       1989-01-20 Republican
##  9 Clinton    1993-01-20 Democratic
## 10 Bush       2001-01-20 Republican
## 11 Obama      2009-01-20 Democratic</code></pre>
<hr />
</div>
<div id="use-select-to-order-columns" class="section level1">
<h1>Use <code>select</code> to order columns</h1>
<pre class="r"><code>library(fivethirtyeight)
college_grad_students</code></pre>
<pre><code>## # A tibble: 173 x 22
##    major_code major    major_category  grad_total grad_sample_size grad_employed
##         &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                &lt;int&gt;            &lt;int&gt;         &lt;int&gt;
##  1       5601 Constru~ Industrial Art~       9173              200          7098
##  2       6004 Commerc~ Arts                 53864              882         40492
##  3       6211 Hospita~ Business             24417              437         18368
##  4       2201 Cosmeto~ Industrial Art~       5411               72          3590
##  5       2001 Communi~ Computers &amp; Ma~       9109              171          7512
##  6       3201 Court R~ Law &amp; Public P~       1542               22          1008
##  7       6206 Marketi~ Business            190996             3738        151570
##  8       1101 Agricul~ Agriculture &amp; ~      17488              386         13104
##  9       2101 Compute~ Computers &amp; Ma~       5611               98          4716
## 10       1904 Adverti~ Communications~      33928              688         28517
## # ... with 163 more rows, and 16 more variables:
## #   grad_employed_fulltime_yearround &lt;int&gt;, grad_unemployed &lt;int&gt;,
## #   grad_unemployment_rate &lt;dbl&gt;, grad_p25th &lt;dbl&gt;, grad_median &lt;dbl&gt;,
## #   grad_p75th &lt;int&gt;, nongrad_total &lt;int&gt;, nongrad_employed &lt;int&gt;,
## #   nongrad_employed_fulltime_yearround &lt;int&gt;, nongrad_unemployed &lt;int&gt;,
## #   nongrad_unemployment_rate &lt;dbl&gt;, nongrad_p25th &lt;dbl&gt;, nongrad_median &lt;dbl&gt;,
## #   nongrad_p75th &lt;dbl&gt;, grad_share &lt;dbl&gt;, grad_premium &lt;dbl&gt;</code></pre>
<hr />
</div>
<div id="use-select-to-order-columns-1" class="section level1">
<h1>Use <code>select</code> to order columns</h1>
<pre class="r"><code>college_grad_students %&gt;%
    select(major_code, grad_total, grad_sample_size, everything())</code></pre>
<pre><code>## # A tibble: 173 x 22
##    major_code grad_total grad_sample_size major    major_category  grad_employed
##         &lt;int&gt;      &lt;int&gt;            &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                   &lt;int&gt;
##  1       5601       9173              200 Constru~ Industrial Art~          7098
##  2       6004      53864              882 Commerc~ Arts                    40492
##  3       6211      24417              437 Hospita~ Business                18368
##  4       2201       5411               72 Cosmeto~ Industrial Art~          3590
##  5       2001       9109              171 Communi~ Computers &amp; Ma~          7512
##  6       3201       1542               22 Court R~ Law &amp; Public P~          1008
##  7       6206     190996             3738 Marketi~ Business               151570
##  8       1101      17488              386 Agricul~ Agriculture &amp; ~         13104
##  9       2101       5611               98 Compute~ Computers &amp; Ma~          4716
## 10       1904      33928              688 Adverti~ Communications~         28517
## # ... with 163 more rows, and 16 more variables:
## #   grad_employed_fulltime_yearround &lt;int&gt;, grad_unemployed &lt;int&gt;,
## #   grad_unemployment_rate &lt;dbl&gt;, grad_p25th &lt;dbl&gt;, grad_median &lt;dbl&gt;,
## #   grad_p75th &lt;int&gt;, nongrad_total &lt;int&gt;, nongrad_employed &lt;int&gt;,
## #   nongrad_employed_fulltime_yearround &lt;int&gt;, nongrad_unemployed &lt;int&gt;,
## #   nongrad_unemployment_rate &lt;dbl&gt;, nongrad_p25th &lt;dbl&gt;, nongrad_median &lt;dbl&gt;,
## #   nongrad_p75th &lt;dbl&gt;, grad_share &lt;dbl&gt;, grad_premium &lt;dbl&gt;</code></pre>
<p><code>everything()</code> is a helper verb that includes all column names</p>
<hr />
</div>
<div id="relocate" class="section level1">
<h1><code>relocate()</code></h1>
<p>.darkorange[<code>relocate(</code>].lightblue[<code>.data</code>]<code>, ...</code> .green[<code>before</code>]<code>= NULL,</code>lightorange[<code>.after</code>]<code>= NULL)</code></p>
<p>lightblue[<code>.data</code>] = dataframe/tibble <code>...</code> = columns to move .green[<code>.before</code>] = variable to move <em>before</em> lightorange[<code>.after</code>] = variable to move <em>after</em> - supplying neither .green[<code>.before</code>] nor lightorange[<code>.after</code>] move columns to the left-hand side - specifying both is an error</p>
<hr />
</div>
<div id="relocate-1" class="section level1">
<h1><code>relocate()</code></h1>
<pre class="r"><code>presidential %&gt;% 
  relocate(party)</code></pre>
<pre><code>## # A tibble: 11 x 4
##    party      name       start      end       
##    &lt;chr&gt;      &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;    
##  1 Republican Eisenhower 1953-01-20 1961-01-20
##  2 Democratic Kennedy    1961-01-20 1963-11-22
##  3 Democratic Johnson    1963-11-22 1969-01-20
##  4 Republican Nixon      1969-01-20 1974-08-09
##  5 Republican Ford       1974-08-09 1977-01-20
##  6 Democratic Carter     1977-01-20 1981-01-20
##  7 Republican Reagan     1981-01-20 1989-01-20
##  8 Republican Bush       1989-01-20 1993-01-20
##  9 Democratic Clinton    1993-01-20 2001-01-20
## 10 Republican Bush       2001-01-20 2009-01-20
## 11 Democratic Obama      2009-01-20 2017-01-20</code></pre>
<p>.footnote[ moves “party” to far left (default)]</p>
<hr />
</div>
<div id="relocate-2" class="section level1">
<h1><code>relocate()</code></h1>
<pre class="r"><code>presidential %&gt;% 
  relocate(party, .after = start)</code></pre>
<pre><code>## # A tibble: 11 x 4
##    name       start      party      end       
##    &lt;chr&gt;      &lt;date&gt;     &lt;chr&gt;      &lt;date&gt;    
##  1 Eisenhower 1953-01-20 Republican 1961-01-20
##  2 Kennedy    1961-01-20 Democratic 1963-11-22
##  3 Johnson    1963-11-22 Democratic 1969-01-20
##  4 Nixon      1969-01-20 Republican 1974-08-09
##  5 Ford       1974-08-09 Republican 1977-01-20
##  6 Carter     1977-01-20 Democratic 1981-01-20
##  7 Reagan     1981-01-20 Republican 1989-01-20
##  8 Bush       1989-01-20 Republican 1993-01-20
##  9 Clinton    1993-01-20 Democratic 2001-01-20
## 10 Bush       2001-01-20 Republican 2009-01-20
## 11 Obama      2009-01-20 Democratic 2017-01-20</code></pre>
<p>.footnote[ moves “party” after “start”]</p>
<hr />
</div>
<div id="relocate-3" class="section level1">
<h1><code>relocate()</code></h1>
<pre class="r"><code>presidential %&gt;% 
  relocate(end, .before = party)</code></pre>
<pre><code>## # A tibble: 11 x 4
##    name       start      end        party     
##    &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
##  1 Eisenhower 1953-01-20 1961-01-20 Republican
##  2 Kennedy    1961-01-20 1963-11-22 Democratic
##  3 Johnson    1963-11-22 1969-01-20 Democratic
##  4 Nixon      1969-01-20 1974-08-09 Republican
##  5 Ford       1974-08-09 1977-01-20 Republican
##  6 Carter     1977-01-20 1981-01-20 Democratic
##  7 Reagan     1981-01-20 1989-01-20 Republican
##  8 Bush       1989-01-20 1993-01-20 Republican
##  9 Clinton    1993-01-20 2001-01-20 Democratic
## 10 Bush       2001-01-20 2009-01-20 Republican
## 11 Obama      2009-01-20 2017-01-20 Democratic</code></pre>
<p>.footnote[ moves “end” before “party”]</p>
<hr />
</div>
<div id="filter-2" class="section level1">
<h1><code>filter()</code></h1>
<p><img src="https://d33wubrfki0l68.cloudfront.net/01f4b6d39d2be8269740a3ad7946faa79f7243cf/8369a/diagrams/transform-logical.png" /></p>
<p>Complete set of boolean operations - <em>x</em> is the left-hand circle - <em>y</em> is the right-hand circle - the shaded region show which parts each operator selects + <em>xor</em> == <em>x</em> or <em>y</em> except where they overlap</p>
<p>.footnote[ Image from <a href="https://r4ds.had.co.nz/transform.html?q=filter#filter-rows-with-filter">Wickham &amp; Grolemund (2017)</a>]</p>
<hr />
</div>
<div id="filter-numeric" class="section level1">
<h1><code>filter()</code> numeric</h1>
<p>.pull-left[</p>
<pre class="r"><code>mpg %&gt;% 
  filter(cyl == 4)</code></pre>
<pre><code>## # A tibble: 81 x 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto~ f        18    29 p     comp~
##  2 audi         a4           1.8  1999     4 manu~ f        21    29 p     comp~
##  3 audi         a4           2    2008     4 manu~ f        20    31 p     comp~
##  4 audi         a4           2    2008     4 auto~ f        21    30 p     comp~
##  5 audi         a4 quattro   1.8  1999     4 manu~ 4        18    26 p     comp~
##  6 audi         a4 quattro   1.8  1999     4 auto~ 4        16    25 p     comp~
##  7 audi         a4 quattro   2    2008     4 manu~ 4        20    28 p     comp~
##  8 audi         a4 quattro   2    2008     4 auto~ 4        19    27 p     comp~
##  9 chevrolet    malibu       2.4  1999     4 auto~ f        19    27 r     mids~
## 10 chevrolet    malibu       2.4  2008     4 auto~ f        22    30 r     mids~
## # ... with 71 more rows</code></pre>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>mpg %&gt;% 
  filter(hwy &gt;= 22)</code></pre>
<pre><code>## # A tibble: 143 x 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto~ f        18    29 p     comp~
##  2 audi         a4           1.8  1999     4 manu~ f        21    29 p     comp~
##  3 audi         a4           2    2008     4 manu~ f        20    31 p     comp~
##  4 audi         a4           2    2008     4 auto~ f        21    30 p     comp~
##  5 audi         a4           2.8  1999     6 auto~ f        16    26 p     comp~
##  6 audi         a4           2.8  1999     6 manu~ f        18    26 p     comp~
##  7 audi         a4           3.1  2008     6 auto~ f        18    27 p     comp~
##  8 audi         a4 quattro   1.8  1999     4 manu~ 4        18    26 p     comp~
##  9 audi         a4 quattro   1.8  1999     4 auto~ 4        16    25 p     comp~
## 10 audi         a4 quattro   2    2008     4 manu~ 4        20    28 p     comp~
## # ... with 133 more rows</code></pre>
<p>]</p>
<hr />
</div>
<div id="filter-character" class="section level1">
<h1><code>filter()</code> character</h1>
<p>.pull-left[</p>
<pre class="r"><code>mpg %&gt;% 
  filter(manufacturer == &quot;pontiac&quot;)</code></pre>
<pre><code>## # A tibble: 5 x 11
##   manufacturer model      displ  year   cyl trans  drv     cty   hwy fl    class
##   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
## 1 pontiac      grand prix   3.1  1999     6 auto(~ f        18    26 r     mids~
## 2 pontiac      grand prix   3.8  1999     6 auto(~ f        16    26 p     mids~
## 3 pontiac      grand prix   3.8  1999     6 auto(~ f        17    27 r     mids~
## 4 pontiac      grand prix   3.8  2008     6 auto(~ f        18    28 r     mids~
## 5 pontiac      grand prix   5.3  2008     8 auto(~ f        16    25 p     mids~</code></pre>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>presidential %&gt;% 
  filter(party == &quot;Democratic&quot;)</code></pre>
<pre><code>## # A tibble: 5 x 4
##   name    start      end        party     
##   &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
## 1 Kennedy 1961-01-20 1963-11-22 Democratic
## 2 Johnson 1963-11-22 1969-01-20 Democratic
## 3 Carter  1977-01-20 1981-01-20 Democratic
## 4 Clinton 1993-01-20 2001-01-20 Democratic
## 5 Obama   2009-01-20 2017-01-20 Democratic</code></pre>
<p>]</p>
<hr />
</div>
<div id="democrats-starting-after-2000" class="section level1">
<h1>Democrats starting after 2000</h1>
<p><code>,</code> is equivalent to <code>&amp;</code></p>
<p>.pull-left[</p>
<pre class="r"><code>presidential %&gt;% 
  filter(party == &quot;Democratic&quot; &amp; 
  start &gt; &quot;2000-01-01&quot;)</code></pre>
<pre><code>## # A tibble: 1 x 4
##   name  start      end        party     
##   &lt;chr&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
## 1 Obama 2009-01-20 2017-01-20 Democratic</code></pre>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>presidential %&gt;% 
  filter(party == &quot;Democratic&quot;, 
  start &gt; &quot;2000-01-01&quot;)</code></pre>
<pre><code>## # A tibble: 1 x 4
##   name  start      end        party     
##   &lt;chr&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
## 1 Obama 2009-01-20 2017-01-20 Democratic</code></pre>
<p>]</p>
<hr />
<p><code>filter</code> for Democrats</p>
<p>note the use of <code>==</code> NOT <code>=</code></p>
<pre class="r"><code>presidential %&gt;%
    filter(party == &quot;Democratic&quot;)</code></pre>
<pre><code>## # A tibble: 5 x 4
##   name    start      end        party     
##   &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
## 1 Kennedy 1961-01-20 1963-11-22 Democratic
## 2 Johnson 1963-11-22 1969-01-20 Democratic
## 3 Carter  1977-01-20 1981-01-20 Democratic
## 4 Clinton 1993-01-20 2001-01-20 Democratic
## 5 Obama   2009-01-20 2017-01-20 Democratic</code></pre>
<p>–</p>
<pre class="r"><code>presidential %&gt;%
    filter(party == &quot;Democratic&quot;)</code></pre>
<pre><code>## # A tibble: 5 x 4
##   name    start      end        party     
##   &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
## 1 Kennedy 1961-01-20 1963-11-22 Democratic
## 2 Johnson 1963-11-22 1969-01-20 Democratic
## 3 Carter  1977-01-20 1981-01-20 Democratic
## 4 Clinton 1993-01-20 2001-01-20 Democratic
## 5 Obama   2009-01-20 2017-01-20 Democratic</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
